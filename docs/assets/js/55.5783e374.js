(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{478:function(e,t,s){"use strict";s.r(t);var a=s(62),r=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"faceting-settings-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#faceting-settings-api"}},[e._v("#")]),e._v(" Faceting Settings API")]),e._v(" "),s("h2",{attrs:{id:"_1-summary"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-summary"}},[e._v("#")]),e._v(" 1. Summary")]),e._v(" "),s("p",[e._v("This specification describes the customizable options for the faceting settings.")]),e._v(" "),s("h2",{attrs:{id:"_2-motivation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-motivation"}},[e._v("#")]),e._v(" 2. Motivation")]),e._v(" "),s("p",[e._v("Despite the default values that work out-of-the-box for most users, some need to go further in customization.")]),e._v(" "),s("p",[e._v("This settings will host the parameters to configure the faceting behavior for an index.")]),e._v(" "),s("h2",{attrs:{id:"_3-functional-specification"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-functional-specification"}},[e._v("#")]),e._v(" 3. Functional Specification")]),e._v(" "),s("h3",{attrs:{id:"_3-1-faceting-api-resource-definition"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-faceting-api-resource-definition"}},[e._v("#")]),e._v(" 3.1. "),s("code",[e._v("faceting")]),e._v(" API resource definition")]),e._v(" "),s("table",[s("thead",[s("tr",[s("th",[e._v("Field")]),e._v(" "),s("th",[e._v("Type")]),e._v(" "),s("th",[e._v("Required")])])]),e._v(" "),s("tbody",[s("tr",[s("td",[s("a",{attrs:{href:"#311-maxValuesPerFacet"}},[e._v("maxValuesPerFacet")])]),e._v(" "),s("td",[e._v("Integer")]),e._v(" "),s("td",[e._v("False")])])])]),e._v(" "),s("h4",{attrs:{id:"_3-1-1-maxvaluesperfacet"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-1-maxvaluesperfacet"}},[e._v("#")]),e._v(" 3.1.1. "),s("code",[e._v("maxValuesPerFacet")])]),e._v(" "),s("ul",[s("li",[e._v("Type: Integer")]),e._v(" "),s("li",[e._v("Required: False")]),e._v(" "),s("li",[e._v("Default: "),s("code",[e._v("100")])])]),e._v(" "),s("p",[e._v("Define maximum number of value returned for all distributed facets.")]),e._v(" "),s("p",[e._v("e.g. It means that with the default value of "),s("code",[e._v("100")]),e._v(", it is not possible to have "),s("code",[e._v("101")]),e._v(" different colors if the "),s("code",[e._v("color")]),e._v(" field is defined as a facet at search time.")]),e._v(" "),s("p",[e._v("The value of 100 ensures good performance and prevents malicious users from scraping data from a Meilisearch instance.")]),e._v(" "),s("p",[e._v("Increasing this value can degrade performance as well as expose the data of an instance to scrapping.")]),e._v(" "),s("p",[e._v("The facets that are returned are sorted in ascending lexicographical order.")]),e._v(" "),s("h2",{attrs:{id:"_3-2-api-endpoints-definition"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-api-endpoints-definition"}},[e._v("#")]),e._v(" 3.2. API Endpoints Definition")]),e._v(" "),s("h3",{attrs:{id:"_3-2-1-global-settings-api-endpoints-definition"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-1-global-settings-api-endpoints-definition"}},[e._v("#")]),e._v(" 3.2.1. Global Settings API Endpoints Definition")]),e._v(" "),s("p",[s("code",[e._v("faceting")]),e._v(" is a sub-resource of "),s("code",[e._v("/indexes/:index_uid/settings")]),e._v(".")]),e._v(" "),s("p",[e._v("See "),s("RouterLink",{attrs:{to:"/specifications/text/0123-settings-api.html"}},[e._v("Settings API")]),e._v(".")],1),e._v(" "),s("h3",{attrs:{id:"_3-2-2-indexes-index-uid-settings-faceting"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-2-indexes-index-uid-settings-faceting"}},[e._v("#")]),e._v(" 3.2.2. "),s("code",[e._v("indexes/:index_uid/settings/faceting")])]),e._v(" "),s("p",[e._v("Manage the faceting configuration for an index.")]),e._v(" "),s("h4",{attrs:{id:"_3-2-2-1-get-indexes-index-uid-settings-faceting"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-2-1-get-indexes-index-uid-settings-faceting"}},[e._v("#")]),e._v(" 3.2.2.1. "),s("code",[e._v("GET")]),e._v(" - "),s("code",[e._v("indexes/:index_uid/settings/faceting")])]),e._v(" "),s("p",[e._v("Allow fetching the current definition of the faceting setting for an index.")]),e._v(" "),s("p",[s("code",[e._v("200")]),e._v(" - Response body")]),e._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[e._v("    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"maxValuesPerFacet"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("100")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),s("p",[e._v("All properties must be returned when the resource is retrieved.")]),e._v(" "),s("h5",{attrs:{id:"_3-2-2-1-2-errors"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-2-1-2-errors"}},[e._v("#")]),e._v(" 3.2.2.1.2. Errors")]),e._v(" "),s("ul",[s("li",[e._v("ðŸ”´ If the index does not exist, the API returns an "),s("RouterLink",{attrs:{to:"/specifications/text/0061-error-format-and-definitions.html#index_not_found"}},[e._v("index_not_found")]),e._v(" error.")],1)]),e._v(" "),s("h4",{attrs:{id:"_3-2-2-2-patch-indexes-index-uid-settings-faceting"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-2-2-patch-indexes-index-uid-settings-faceting"}},[e._v("#")]),e._v(" 3.2.2.2. "),s("code",[e._v("PATCH")]),e._v(" - "),s("code",[e._v("indexes/:index_uid/settings/faceting")])]),e._v(" "),s("p",[e._v("Allow customizing partially the settings of an index for faceting.")]),e._v(" "),s("p",[e._v("Request payload")]),e._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"maxValuesPerFacet"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("10")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),s("p",[s("code",[e._v("202 Accepted")]),e._v(" - Example Response")]),e._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"uid"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("42")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"indexUid"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"books"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"enqueued"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"settingsUpdate"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"enqueuedAt"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"2022-03-01T18:39:29.228155Z"')]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),s("h5",{attrs:{id:"_3-2-2-2-1-response-definition"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-2-2-1-response-definition"}},[e._v("#")]),e._v(" 3.2.2.2.1. Response Definition")]),e._v(" "),s("p",[e._v("When the request is successful, Meilisearch returns the HTTP code "),s("code",[e._v("202 Accepted")]),e._v(". The response's content is the summarized representation of the received asynchronous task.")]),e._v(" "),s("p",[e._v("See "),s("RouterLink",{attrs:{to:"/specifications/text/0060-tasks-api.html#summarized-task-object-for-202-accepted"}},[e._v("Summarized "),s("code",[e._v("task")]),e._v(" Object for "),s("code",[e._v("202 Accepted")])]),e._v(".")],1),e._v(" "),s("h5",{attrs:{id:"_3-2-2-2-2-errors"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-2-2-2-errors"}},[e._v("#")]),e._v(" 3.2.2.2.2. Errors")]),e._v(" "),s("ul",[s("li",[e._v("ðŸ”´ Omitting Content-Type header returns a "),s("RouterLink",{attrs:{to:"/specifications/text/0061-error-format-and-definitions.html#missing_content_type"}},[e._v("missing_content_type")]),e._v(" error.")],1),e._v(" "),s("li",[e._v("ðŸ”´ Sending an empty Content-Type returns an "),s("RouterLink",{attrs:{to:"/specifications/text/0061-error-format-and-definitions.html#invalid_content_type"}},[e._v("invalid_content_type")]),e._v(" error.")],1),e._v(" "),s("li",[e._v("ðŸ”´ Sending a different Content-Type than "),s("code",[e._v("application/json")]),e._v(" returns an "),s("RouterLink",{attrs:{to:"/specifications/text/0061-error-format-and-definitions.html#invalid_content_type"}},[e._v("invalid_content_type")]),e._v(" error.")],1),e._v(" "),s("li",[e._v("ðŸ”´ Sending an empty payload returns a "),s("RouterLink",{attrs:{to:"/specifications/text/0061-error-format-and-definitions.html#missing_payload"}},[e._v("missing_payload")]),e._v(" error.")],1),e._v(" "),s("li",[e._v("ðŸ”´ Sending an invalid JSON payload returns a "),s("RouterLink",{attrs:{to:"/specifications/text/0061-error-format-and-definitions.html#malformed_payload"}},[e._v("malformed_payload")]),e._v(" error.")],1),e._v(" "),s("li",[e._v("ðŸ”´ Sending a value with a different type than "),s("code",[e._v("Integer")]),e._v(" for the "),s("code",[e._v("maxValuesPerFacet")]),e._v(" field returns an "),s("RouterLink",{attrs:{to:"/specifications/text/0061-error-format-and-definitions.html#bad_request"}},[e._v("bad_request")]),e._v(" error.")],1)]),e._v(" "),s("h6",{attrs:{id:"_3-2-2-2-2-1-async-errors"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-2-2-2-1-async-errors"}},[e._v("#")]),e._v(" 3.2.2.2.2.1. Async Errors")]),e._v(" "),s("ul",[s("li",[e._v("ðŸ”´ When Meilisearch is secured, if the API Key do not have the "),s("code",[e._v("indexes.create")]),e._v(" action defined, the API returns an "),s("RouterLink",{attrs:{to:"/specifications/text/0061-error-format-and-definitions.html#index_not_found"}},[e._v("index_not_found")]),e._v(" error in the related asynchronous "),s("code",[e._v("task")]),e._v(" resource. See "),s("a",{attrs:{href:"#32221-response-definition"}},[e._v("3.2.2.2.1. Response Definition")]),e._v(".")],1)]),e._v(" "),s("blockquote",[s("p",[e._v("Otherwise, Meilisearch will create the index in a lazy way. See "),s("a",{attrs:{href:"#32223-lazy-index-creation"}},[e._v("3.2.2.2.3. Lazy Index Creation")]),e._v(".")])]),e._v(" "),s("h5",{attrs:{id:"_3-2-2-2-3-lazy-index-creation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-2-2-3-lazy-index-creation"}},[e._v("#")]),e._v(" 3.2.2.2.3. Lazy Index Creation")]),e._v(" "),s("p",[e._v("If the requested "),s("code",[e._v("index_uid")]),e._v(" does not exist, and the authorization layer allows it (See "),s("a",{attrs:{href:"#322221-async-errors"}},[e._v("3.2.2.2.2.1. Async Errors")]),e._v("), Meilisearch will create the index when the related asynchronous task resource is executed. See "),s("a",{attrs:{href:"#32221-response-definition"}},[e._v("3.2.2.2.1. Response Definition")]),e._v(".")]),e._v(" "),s("h4",{attrs:{id:"_3-2-2-3-delete-indexes-index-uid-settings-faceting"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-2-3-delete-indexes-index-uid-settings-faceting"}},[e._v("#")]),e._v(" 3.2.2.3. "),s("code",[e._v("DELETE")]),e._v("- "),s("code",[e._v("indexes/:index_uid/settings/faceting")])]),e._v(" "),s("p",[e._v("Allow resetting the faceting setting to the default for an index.")]),e._v(" "),s("h5",{attrs:{id:"_3-2-2-3-1-response-definition"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-2-3-1-response-definition"}},[e._v("#")]),e._v(" 3.2.2.3.1. Response Definition")]),e._v(" "),s("p",[e._v("When the request is in a successful state, Meilisearch returns the HTTP code "),s("code",[e._v("202 Accepted")]),e._v(". The response's content is the summarized representation of the received asynchronous task.")]),e._v(" "),s("p",[e._v("See "),s("RouterLink",{attrs:{to:"/specifications/text/0060-tasks-api.html#summarized-task-object-for-202-accepted"}},[e._v("Summarized "),s("code",[e._v("task")]),e._v(" Object for "),s("code",[e._v("202 Accepted")])]),e._v(".")],1),e._v(" "),s("h5",{attrs:{id:"_3-2-2-3-2-errors"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-2-3-2-errors"}},[e._v("#")]),e._v(" 3.2.2.3.2. Errors")]),e._v(" "),s("h6",{attrs:{id:"_3-2-2-3-2-1-asynchronous-index-not-found-error"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-2-3-2-1-asynchronous-index-not-found-error"}},[e._v("#")]),e._v(" 3.2.2.3.2.1. Asynchronous Index Not Found Error")]),e._v(" "),s("ul",[s("li",[e._v("ðŸ”´ If the requested "),s("code",[e._v("index_uid")]),e._v(" does not exist, the API returns an "),s("RouterLink",{attrs:{to:"/specifications/text/0061-error-format-and-definitions.html#index_not_found"}},[e._v("index_not_found")]),e._v(" error in the related async "),s("code",[e._v("task")]),e._v(" resource. See "),s("a",{attrs:{href:"#32231-response-definition"}},[e._v("3.2.2.3.1. Response Definition")]),e._v(".")],1)]),e._v(" "),s("h3",{attrs:{id:"_3-2-3-general-errors"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-3-general-errors"}},[e._v("#")]),e._v(" 3.2.3. General Errors")]),e._v(" "),s("p",[e._v("These errors apply to all endpoints described here.")]),e._v(" "),s("h4",{attrs:{id:"_3-2-3-1-auth-errors"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-3-1-auth-errors"}},[e._v("#")]),e._v(" 3.2.3.1. Auth Errors")]),e._v(" "),s("p",[e._v("The auth layer can return the following errors if Meilisearch is secured (a master-key is defined).")]),e._v(" "),s("ul",[s("li",[e._v("ðŸ”´ Accessing this route without the "),s("code",[e._v("Authorization")]),e._v(" header returns a "),s("RouterLink",{attrs:{to:"/specifications/text/0061-error-format-and-definitions.html#missing_authorization_header"}},[e._v("missing_authorization_header")]),e._v(" error.")],1),e._v(" "),s("li",[e._v("ðŸ”´ Accessing this route with a key that does not have permissions (i.e. other than the master-key) returns an "),s("RouterLink",{attrs:{to:"/specifications/text/0061-error-format-and-definitions.html#invalid_api_key"}},[e._v("invalid_api_key")]),e._v(" error.")],1)]),e._v(" "),s("h2",{attrs:{id:"_2-technical-details"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-technical-details"}},[e._v("#")]),e._v(" 2. Technical Details")]),e._v(" "),s("p",[e._v("n/a")]),e._v(" "),s("h2",{attrs:{id:"_3-future-possibilities"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-future-possibilities"}},[e._v("#")]),e._v(" 3. Future Possibilities")]),e._v(" "),s("ul",[s("li",[e._v("Introduces a field to define the sorting of facets. e.g "),s("code",[e._v("sort")]),e._v(" by "),s("code",[e._v("count")]),e._v("/"),s("code",[e._v("alphanumeric")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);